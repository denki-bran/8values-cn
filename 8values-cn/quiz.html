<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>8-values 中文版 测试</title>
    <link rel="stylesheet" href="./dist/css/style.css">
    <script type="application/javascript" src="./dist/js/questions.min.js"></script>
</head>
<body>
<div class="mod-menu" id="8vMenu">
    <div class="mod-menu-wrapper">
        <div class="mod-menu-n" id="8vCons1">01</div>
        <div class="mod-menu-n" id="8vCons2">02</div>
        <div class="mod-menu-n" id="8vCons3">03</div>
        <div class="mod-menu-n" id="8vCons4">04</div>
        <div class="mod-menu-n" id="8vCons5">05</div>
        <div class="mod-menu-n" id="8vCons6">06</div>
        <div class="mod-menu-n" id="8vCons7">07</div>
        <div class="mod-menu-n" id="8vCons8">08</div>
        <div class="mod-menu-n" id="8vCons9">09</div>
        <div class="mod-menu-n" id="8vCons10">10</div>
        <div class="mod-menu-n" id="8vCons11">11</div>
        <div class="mod-menu-n" id="8vCons12">12</div>
        <div class="mod-menu-n" id="8vCons13">13</div>
        <div class="mod-menu-n" id="8vCons14">14</div>
        <div class="mod-menu-n" id="8vCons15">15</div>
        <div class="mod-menu-n" id="8vCons16">16</div>
        <div class="mod-menu-n" id="8vCons17">17</div>
        <div class="mod-menu-n" id="8vCons18">18</div>
        <div class="mod-menu-n" id="8vCons19">19</div>
        <div class="mod-menu-n" id="8vCons20">20</div>
        <div class="mod-menu-n" id="8vCons21">21</div>
        <div class="mod-menu-n" id="8vCons22">22</div>
        <div class="mod-menu-n" id="8vCons23">23</div>
        <div class="mod-menu-n" id="8vCons24">24</div>
        <div class="mod-menu-n" id="8vCons25">25</div>
        <div class="mod-menu-n" id="8vCons26">26</div>
        <div class="mod-menu-n" id="8vCons27">27</div>
        <div class="mod-menu-n" id="8vCons28">28</div>
        <div class="mod-menu-n" id="8vCons29">29</div>
        <div class="mod-menu-n" id="8vCons30">30</div>
        <div class="mod-menu-n" id="8vCons31">31</div>
        <div class="mod-menu-n" id="8vCons32">32</div>
        <div class="mod-menu-n" id="8vCons33">33</div>
        <div class="mod-menu-n" id="8vCons34">34</div>
        <div class="mod-menu-n" id="8vCons35">35</div>
        <div class="mod-menu-n" id="8vCons36">36</div>
        <div class="mod-menu-n" id="8vCons37">37</div>
        <div class="mod-menu-n" id="8vCons38">38</div>
        <div class="mod-menu-n" id="8vCons39">39</div>
        <div class="mod-menu-n" id="8vCons40">40</div>
        <div class="mod-menu-n" id="8vCons41">41</div>
        <div class="mod-menu-n" id="8vCons42">42</div>
        <div class="mod-menu-n" id="8vCons43">43</div>
        <div class="mod-menu-n" id="8vCons44">44</div>
        <div class="mod-menu-n" id="8vCons45">45</div>
        <div class="mod-menu-n" id="8vCons46">46</div>
        <div class="mod-menu-n" id="8vCons47">47</div>
        <div class="mod-menu-n" id="8vCons48">48</div>
        <div class="mod-menu-n" id="8vCons49">49</div>
        <div class="mod-menu-n" id="8vCons50">50</div>
        <div class="mod-menu-n" id="8vCons51">51</div>
        <div class="mod-menu-n" id="8vCons52">52</div>
        <div class="mod-menu-n" id="8vCons53">53</div>
        <div class="mod-menu-n" id="8vCons54">54</div>
        <div class="mod-menu-n" id="8vCons55">55</div>
        <div class="mod-menu-n" id="8vCons56">56</div>
        <div class="mod-menu-n" id="8vCons57">57</div>
        <div class="mod-menu-n" id="8vCons58">58</div>
        <div class="mod-menu-n" id="8vCons59">59</div>
        <div class="mod-menu-n" id="8vCons60">60</div>
        <div class="mod-menu-n" id="8vCons61">61</div>
        <div class="mod-menu-n" id="8vCons62">62</div>
        <div class="mod-menu-n" id="8vCons63">63</div>
        <div class="mod-menu-n" id="8vCons64">64</div>
        <div class="mod-menu-n" id="8vCons65">65</div>
        <div class="mod-menu-n" id="8vCons66">66</div>
        <div class="mod-menu-n" id="8vCons67">67</div>
        <div class="mod-menu-n" id="8vCons68">68</div>
        <div class="mod-menu-n" id="8vCons69">69</div>
        <div class="mod-menu-n" id="8vCons70">70</div>
    </div>
</div>
<div class="mod-wrapper mod-quiz-con" id="8vCon">
    <div class="mod-header">
        <div class="mod-question-wrapper">
            <p class="mod-question-text" id="question-text"></p>
        </div>
    </div>
    <hr class="mod-hr">
    <div class="mod-selection">
        <a class="mod-opt-line" onclick="next_question( 1.0)" style="background-color: #1b5e20; color:#ffffff;"><span>强烈同意</span></a>
        <a class="mod-opt-line mt20" onclick="next_question( 0.5)" style="background-color: #4caf50;color:#ffffff;"><span>同意</span></a>
        <a class="mod-opt-line mt20" onclick="next_question( 0.0)" style="background-color: #bbbbbb;color:#ffffff;"><span>没意见/不清楚</span></a>
        <a class="mod-opt-line mt20" onclick="next_question(-0.5)" style="background-color: #f44336;color:#ffffff;"><span>反对</span></a>
        <a class="mod-opt-line mt20" onclick="next_question(-1.0)" style="background-color: #b71c1c;color:#ffffff;"><span>强烈反对</span></a>
    </div>
    <div class="mod-list mt20" onclick="showMenu(this)">
        <div class="mod-list-btn mt20">
            <img src="./dist/images/menu-btn.svg">
        </div>
    </div>
    <p class="tit-q-num" id="question-number"></p>
</div>
<script>
var max_econ, max_dipl, max_govt, max_scty; // Max possible scores
max_econ = max_dipl = max_govt = max_scty = 0;
var econ, dipl, govt, scty; // User's scores
econ = dipl = govt = scty = 0;
var qn = 0; // Question number
var prev_answer = null;
var ansArray = new Array(questions.length);
init_question();

for (var i = 0; i < questions.length; i++) {
    max_econ += Math.abs(questions[i].effect.econ);
    max_dipl += Math.abs(questions[i].effect.dipl);
    max_govt += Math.abs(questions[i].effect.govt);
    max_scty += Math.abs(questions[i].effect.scty)
}
function init_question() {
    document.getElementById("question-text").innerHTML = questions[qn].question;
    var num = qn+1;
    var tar = document.getElementById("8vCons"+num);
    document.getElementById("question-number").innerHTML = num + " / " + (questions.length);
    tar.style.backgroundColor="#0099ff";
    tar.style.color="#ffffff";

}

function modAnswer(mult){
    var prevAns = ansArray[qn];

    switch(mult){
        case 1.0:
            ansArray[qn]=1;
            break;
        case 0.5:
            ansArray[qn]=2;
            break;
        case 0.0:
            ansArray[qn]=3;
            break;
        case -0.5:
            ansArray[qn]=4;
            break;
        case -1.0:
            ansArray[qn]=5;
            break;
    }

}



function next_question(mult) {
    if(ansArray[qn]!==undefined){
        modAnswer(mult);
    }
    else{
        switch(mult){
            case 1.0:
                ansArray[qn]=1;
                break;
            case 0.5:
                ansArray[qn]=2;
                break;
            case 0.0:
                ansArray[qn]=3;
                break;
            case -0.5:
                ansArray[qn]=4;
                break;
            case -1.0:
                ansArray[qn]=5;
                break;
        }

        econ += mult*questions[qn].effect.econ;
        dipl += mult*questions[qn].effect.dipl;
        govt += mult*questions[qn].effect.govt;
        scty += mult*questions[qn].effect.scty;
        qn++;
        prev_answer = mult;
        if (qn < questions.length) {
            init_question();
        }
        else {
            results();
        }
    }
}
function prev_question() {
    if (prev_answer == null) {
    return;
    }
    qn--;
    econ -= prev_answer * questions[qn].effect.econ;
    dipl -= prev_answer * questions[qn].effect.dipl;
    govt -= prev_answer * questions[qn].effect.govt;
    scty -= prev_answer * questions[qn].effect.scty;
    prev_answer = null;
    init_question();
}

function calc_score(score,max) {
    return (100*(max+score)/(2*max)).toFixed(1)
}

function results() {
    location.href = `results.html`
    + `?e=${calc_score(econ,max_econ)}`
    + `&d=${calc_score(dipl,max_dipl)}`
    + `&g=${calc_score(govt,max_govt)}`
    + `&s=${calc_score(scty,max_scty)}`
}

function showMenu(obj) {
    var menu = document.getElementById('8vMenu');
    var con = document.getElementById('8vCon');
    menu.style.transform ='translateX(0)';
    con.style.transform='translateX(10.4rem)';
    obj.style.transform='rotate(90deg)';
}


</script>
</body>
</html>